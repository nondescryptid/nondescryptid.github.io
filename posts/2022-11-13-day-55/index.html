<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>day 55 - retrieving stuff from localStorage, and updating state from child components | nondescryptid</title><meta name=keywords content="100daysofcode"><meta name=description content="Spent today figuring out how to load things from localStorage. I would try to declare a variable where variable = JSON.parse(localStorage.getItem(&#34;saved&#34;)) (where &ldquo;saved&rdquo; is an array) or something like that, then use it in my component where I&rsquo;d map it, but I would get an error stating that there is no such variable.
Server-side rendering v client-side rendering This issue exists due to a difference between server and client-side rendering (Next."><meta name=author content><link rel=canonical href=https://tomoe.asia/posts/2022-11-13-day-55/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://res.cloudinary.com/dezwnhp01/image/upload/v1690391047/pixeltree.png><link rel=icon type=image/png sizes=16x16 href=https://tomoe.asia/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tomoe.asia/favicon-32x32.png><link rel=apple-touch-icon href=https://tomoe.asia/apple-touch-icon.png><link rel=mask-icon href=https://tomoe.asia/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="day 55 - retrieving stuff from localStorage, and updating state from child components"><meta property="og:description" content="Spent today figuring out how to load things from localStorage. I would try to declare a variable where variable = JSON.parse(localStorage.getItem(&#34;saved&#34;)) (where &ldquo;saved&rdquo; is an array) or something like that, then use it in my component where I&rsquo;d map it, but I would get an error stating that there is no such variable.
Server-side rendering v client-side rendering This issue exists due to a difference between server and client-side rendering (Next."><meta property="og:type" content="article"><meta property="og:url" content="https://tomoe.asia/posts/2022-11-13-day-55/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-13T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-13T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="day 55 - retrieving stuff from localStorage, and updating state from child components"><meta name=twitter:description content="Spent today figuring out how to load things from localStorage. I would try to declare a variable where variable = JSON.parse(localStorage.getItem(&#34;saved&#34;)) (where &ldquo;saved&rdquo; is an array) or something like that, then use it in my component where I&rsquo;d map it, but I would get an error stating that there is no such variable.
Server-side rendering v client-side rendering This issue exists due to a difference between server and client-side rendering (Next."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://tomoe.asia/posts/"},{"@type":"ListItem","position":3,"name":"day 55 - retrieving stuff from localStorage, and updating state from child components","item":"https://tomoe.asia/posts/2022-11-13-day-55/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"day 55 - retrieving stuff from localStorage, and updating state from child components","name":"day 55 - retrieving stuff from localStorage, and updating state from child components","description":"Spent today figuring out how to load things from localStorage. I would try to declare a variable where variable = JSON.parse(localStorage.getItem(\u0026quot;saved\u0026quot;)) (where \u0026ldquo;saved\u0026rdquo; is an array) or something like that, then use it in my component where I\u0026rsquo;d map it, but I would get an error stating that there is no such variable.\nServer-side rendering v client-side rendering This issue exists due to a difference between server and client-side rendering (Next.","keywords":["100daysofcode"],"articleBody":"Spent today figuring out how to load things from localStorage. I would try to declare a variable where variable = JSON.parse(localStorage.getItem(\"saved\")) (where “saved” is an array) or something like that, then use it in my component where I’d map it, but I would get an error stating that there is no such variable.\nServer-side rendering v client-side rendering This issue exists due to a difference between server and client-side rendering (Next.js uses server-side rendering). localStorage is available as part of the browser API which only exists on the client’s browser. This is something I don’t entirely understand 1, but I resolved this issue by getting items from localStorage within the useEffect() hook thanks to this article: How to Use localStorage with React Hooks to Set and Get Items.\nUpdating saved papers from the individual card components\nMy web app has 2 main components when it comes to showing cards (containing details about papers):\nCardContainer.js (Parent) | |- Card.js (Child) CardContainer contains the array of papers from EMNLP’s Excel sheet, and maps each of these papers to a corresponding Card component. It also contains the array of papers that have been saved in localStorage.\nHowever, the act of “saving” occurs when one clicks on the “Save” button in a Card component. Then, how do I update CardContainer’s (parent) state from the Card (child) component?\nAfter checking out bobbyhadz’s “How to pass a Function as props in React”, I passed my CardContainer’s setSaved() function as a prop into the Card component:\nCardContainer:\nconst [savedPapers, setSaved] = useState([]) ... papers.map(paper =\u003e ( Card:\nconst Card = ({paper, setSaved}) =\u003e { ... function savePaper(){ setSaved(items =\u003e [...items, paper]) } return ( \u003c\u003e {paper \u0026\u0026 Save } I used a spread operator to create a copy of the existing array into a new array where I can add other elements. This works, but I wonder if I should just try passing the entire “Saved” array as a prop and then .push() to it. I used this current solution as I didn’t feel like adding another prop, but that’s not really a technically informed choice…\nProgress/Reflections:\nPapers can now be saved, but the UI isn’t very user-friendly at the moment as there’s no feedback on when you’re viewing the Saved papers or just browsing the original array of papers. It’s possible to deactivate the “saved” view by clicking “View Saved” again, but it’s not intuitive – I know how to use this because I wrote it, but I don’t think it’d be friendly for people who are using it for the first time.\nI might want to change the “View Saved” button’s text to “Return to Browsing” when Saved Papers are being shown. There is also no validation for duplicate saved papers, so it is possible to show multiples of the same paper in the Saved Papers view by clicking one paper’s Save button several times. I should implement validation next.\nAlso, I think I should use modals for showing abstracts instead of replacing the cards’ contents on click – it’s not a nice viewing experience on desktop (with 2 columns) and isn’t a good utilisation of space as the paper’s abstract is contained within the column that the card is in. This means that only half the viewport’s being used. :\\\nI roughly know enough about React to make it work, but I don’t think I truly understand things like component lifecycles (render, constructor, componentDidMount etc) or what the difference between client and server-side rendering is. ↩︎\n","wordCount":"586","inLanguage":"en","datePublished":"2022-11-13T00:00:00Z","dateModified":"2022-11-13T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomoe.asia/posts/2022-11-13-day-55/"},"publisher":{"@type":"Organization","name":"nondescryptid","logo":{"@type":"ImageObject","url":"https://res.cloudinary.com/dezwnhp01/image/upload/v1690391047/pixeltree.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tomoe.asia accesskey=h title="nondescryptid (Alt + H)">nondescryptid</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tomoe.asia/ title=Home><span>Home</span></a></li><li><a href=https://tomoe.asia/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://tomoe.asia/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://tomoe.asia/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>day 55 - retrieving stuff from localStorage, and updating state from child components</h1><div class=post-meta><span title='2022-11-13 00:00:00 +0000 UTC'>November 13, 2022</span>&nbsp;·&nbsp;3 min</div></header><div class=post-content><p>Spent today figuring out how to load things from localStorage. I would try to declare a variable where <code>variable = JSON.parse(localStorage.getItem("saved"))</code> (where &ldquo;saved&rdquo; is an array) or something like that, then use it in my component where I&rsquo;d map it, but I would get an error stating that there is no such variable.</p><p><strong>Server-side rendering v client-side rendering</strong>
This issue exists due to a difference between server and client-side rendering (Next.js uses server-side rendering). localStorage is available as part of the browser API which only exists on the client&rsquo;s browser. This is something I don&rsquo;t entirely understand <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, but I resolved this issue by getting items from localStorage within the useEffect() hook thanks to this article: <a href=https://www.freecodecamp.org/news/how-to-use-localstorage-with-react-hooks-to-set-and-get-items/>How to Use localStorage with React Hooks to Set and Get Items</a>.</p><p><strong>Updating saved papers from the individual card components</strong></p><p>My web app has 2 main components when it comes to showing cards (containing details about papers):</p><pre tabindex=0><code>CardContainer.js (Parent)
|
|- Card.js (Child)
</code></pre><p>CardContainer contains the array of papers from EMNLP&rsquo;s Excel sheet, and maps each of these papers to a corresponding Card component. It also contains the array of papers that have been saved in localStorage.</p><p>However, the act of &ldquo;saving&rdquo; occurs when one clicks on the &ldquo;Save&rdquo; button in a Card component. Then, how do I update CardContainer&rsquo;s (parent) state from the Card (child) component?</p><p>After checking out bobbyhadz&rsquo;s &ldquo;<a href="https://bobbyhadz.com/blog/react-pass-function-as-prop#:~:text=Define%20the%20function%20in%20the,function%20in%20the%20child%20component.">How to pass a Function as props in React</a>&rdquo;, I passed my CardContainer&rsquo;s setSaved() function as a prop into the Card component:</p><p>CardContainer:</p><pre tabindex=0><code>    const [savedPapers, setSaved] = useState([])
    ...
    papers.map(paper =&gt; (&lt;Card paper={paper} setSaved={setSaved}/&gt;
</code></pre><p>Card:</p><pre tabindex=0><code>const Card = ({paper, setSaved}) =&gt; {
    ...
    function savePaper(){
        setSaved(items =&gt; [...items, paper])
    }
    return (
        &lt;&gt; {paper &amp;&amp;  &lt;div className={styles.card}&gt;
        &lt;button onClick={savePaper}&gt;Save&lt;/button&gt;
}
</code></pre><p>I used a spread operator to create a copy of the existing array into a new array where I can add other elements. This works, but I wonder if I should just try passing the entire &ldquo;Saved&rdquo; array as a prop and then .push() to it. I used this current solution as I didn&rsquo;t feel like adding another prop, but that&rsquo;s not really a technically informed choice&mldr;</p><p><strong>Progress/Reflections:</strong></p><p>Papers can now be saved, but the UI isn&rsquo;t very user-friendly at the moment as there&rsquo;s no feedback on when you&rsquo;re viewing the Saved papers or just browsing the original array of papers. It&rsquo;s possible to deactivate the &ldquo;saved&rdquo; view by clicking &ldquo;View Saved&rdquo; again, but it&rsquo;s not intuitive &ndash; I know how to use this because I wrote it, but I don&rsquo;t think it&rsquo;d be friendly for people who are using it for the first time.</p><ul><li>I might want to change the &ldquo;View Saved&rdquo; button&rsquo;s text to &ldquo;Return to Browsing&rdquo; when Saved Papers are being shown.</li></ul><p>There is also no validation for duplicate saved papers, so it is possible to show multiples of the same paper in the Saved Papers view by clicking one paper&rsquo;s Save button several times. I should implement validation next.</p><p>Also, I think I should use modals for showing abstracts instead of replacing the cards&rsquo; contents on click &ndash; it&rsquo;s not a nice viewing experience on desktop (with 2 columns) and isn&rsquo;t a good utilisation of space as the paper&rsquo;s abstract is contained within the column that the card is in. This means that only half the viewport&rsquo;s being used. :\</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>I roughly know enough about React to make it work, but I don&rsquo;t think I truly understand things like component lifecycles (render, constructor, componentDidMount etc) or what the difference between client and server-side rendering is.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://tomoe.asia/tags/100daysofcode/>100daysofcode</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://tomoe.asia>nondescryptid</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>