<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>day 55 - retrieving stuff from localStorage, and updating state from child components</title>
  <meta name="description" content="Spent today figuring out how to load things from localStorage. I would try to declare a variable where variable = JSON.parse(localStorage.getItem("saved")) (...">
  <link rel="icon" href="../assets/img/pixeltree.png">
  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300&display=swap" rel="stylesheet">
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: [
      "MathMenu.js",
      "MathZoom.js",
      "AssistiveMML.js",
      "a11y/accessibility-menu.js"
    ],
    jax: ["input/TeX", "output/CommonHTML"],
    TeX: {
      extensions: [
        "AMSmath.js",
        "AMSsymbols.js",
        "noErrors.js",
        "noUndefined.js",
      ]
    }
  });
</script>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

 <!--   <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
  
  <!-- widget for searching on my site from try.catche.co-->
  <script catche-key="bb085e6f-2914-44d0-9235-eeaf11367173" type="module" crossorigin src="https://cdn.jsdelivr.net/gh/CatcheSearch/catche-search-widget@0.1.1/dist/index.js"></script>
<!-- next line is optional to preload modules -->
<link rel="modulepreload" href="https://cdn.jsdelivr.net/gh/CatcheSearch/catche-search-widget@0.1.1/dist/vendor.js">

  <link rel="stylesheet" type="text/css" href="/css/tufte.css">
  <!-- <link rel="stylesheet" type="text/css" href="/css/print.css" media="print"> -->

  <link rel="canonical" href="https://tomoe.asia/posts/day-55">

  <link rel="alternate" type="application/rss+xml" title="Tomoe" href="https://tomoe.asia/feed.xml" />
</head>

  <body>
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	<a href="/"><img class="badge" src="/assets/img/pixeltree.png" title="i made this too!" alt="CH"></a>
	
		
  	
		
		    
		      <a href="/archive/">archive</a>
		    
	    
  	
		
  	
		
		    
		      <a href="/days/">100 days of code</a>
		    
	    
  	
		
  	
		
		    
		      <a href="/posts/">posts</a>
		    
	    
  	
		
  	
		
		    
		      <a href="/snowflake/">snowflake</a>
		    
	    
  	
		
		    
		      <a href="/about/">About</a>
		    
	    
  	
		
		    
		      <a href="/css/latex.css"></a>
		    
	    
  	
		
		    
		      <a href="/css/print.css"></a>
		    
	    
  	
		
  	
	</nav>
</header>
    <article class="group">
      <h1>day 55 - retrieving stuff from localStorage, and updating state from child components</h1>
<p class="subtitle">November 13, 2022, Sunday</p>

<p>Spent today figuring out how to load things from localStorage. I would try to declare a variable where <code class="language-plaintext highlighter-rouge">variable = JSON.parse(localStorage.getItem("saved"))</code> (where “saved” is an array) or something like that, then use it in my component where I’d map it, but I would get an error stating that there is no such variable.</p>

<p><strong>Server-side rendering v client-side rendering</strong>
This issue exists due to a difference between server and client-side rendering (Next.js uses server-side rendering). localStorage is available as part of the browser API which only exists on the client’s browser. This is something I don’t entirely understand <label for="sidenote-id" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sidenote-id" class="margin-toggle" /><span class="sidenote">I roughly know enough about React to make it work, but I don’t think I truly understand things like component lifecycles (render, constructor, componentDidMount etc) or what the difference between client and server-side rendering is.  </span>, but I resolved this issue by getting items from localStorage within the useEffect() hook thanks to this article: <a href="https://www.freecodecamp.org/news/how-to-use-localstorage-with-react-hooks-to-set-and-get-items/">How to Use localStorage with React Hooks to Set and Get Items</a>.</p>

<p><strong>Updating saved papers from the individual card components</strong></p>

<p>My web app has 2 main components when it comes to showing cards (containing details about papers):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CardContainer.js (Parent)
|
|- Card.js (Child)
</code></pre></div></div>

<p>CardContainer contains the array of papers from EMNLP’s Excel sheet, and maps each of these papers to a corresponding Card component. It also contains the array of papers that have been saved in localStorage.</p>

<p>However, the act of “saving” occurs when one clicks on the “Save” button in a Card component. Then, how do I update CardContainer’s (parent) state from the Card (child) component?</p>

<p>After checking out bobbyhadz’s “<a href="https://bobbyhadz.com/blog/react-pass-function-as-prop#:~:text=Define%20the%20function%20in%20the,function%20in%20the%20child%20component.">How to pass a Function as props in React</a>”, I passed my CardContainer’s setSaved() function as a prop into the Card component:</p>

<p>CardContainer:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    const [savedPapers, setSaved] = useState([])
    ...
    papers.map(paper =&gt; (&lt;Card paper={paper} setSaved={setSaved}/&gt;
</code></pre></div></div>

<p>Card:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const Card = ({paper, setSaved}) =&gt; {
    ...
    function savePaper(){
        setSaved(items =&gt; [...items, paper])
    }
    return (
        &lt;&gt; {paper &amp;&amp;  &lt;div className={styles.card}&gt;
        &lt;button onClick={savePaper}&gt;Save&lt;/button&gt;
}
</code></pre></div></div>

<p>I used a spread operator to create a copy of the existing array into a new array where I can add other elements. This works, but I wonder if I should just try passing the entire “Saved” array as a prop and then .push() to it. I used this current solution as I didn’t feel like adding another prop, but that’s not really a technically informed choice…</p>

<p><strong>Progress/Reflections:</strong></p>

<p>Papers can now be saved, but the UI isn’t very user-friendly at the moment as there’s no feedback on when you’re viewing the Saved papers or just browsing the original array of papers. It’s possible to deactivate the “saved” view by clicking “View Saved” again, but it’s not intuitive – I know how to use this because I wrote it, but I don’t think it’d be friendly for people who are using it for the first time.</p>

<ul>
  <li>I might want to change the “View Saved” button’s text to “Return to Browsing” when Saved Papers are being shown.</li>
</ul>

<p>There is also no validation for duplicate saved papers, so it is possible to show multiples of the same paper in the Saved Papers view by clicking one paper’s Save button several times. I should implement validation next.</p>

<p>Also, I think I should use modals for showing abstracts instead of replacing the cards’ contents on click – it’s not a nice viewing experience on desktop (with 2 columns) and isn’t a good utilisation of space as the paper’s abstract is contained within the column that the card is in. This means that only half the viewport’s being used. :\</p>


<script src="https://giscus.app/client.js"
        data-repo="nondescryptid/nondescryptid.github.io"
        data-repo-id="R_kgDOGueTYA"
        data-category="General"
        data-category-id="DIC_kwDOGueTYM4CUzfg"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>


    </article>
    <span class="print-footer">day 55 - retrieving stuff from localStorage, and updating state from child components - November 13, 2022 - tomoe</span>
    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:hi@tomoe.asia"><span class="icon-mail3"></span></a></li>    
    
      <li>
        <a href="//www.linkedin.com/in/tomoe"><span class="icon-linkedin"></span></a>
      </li>
    
      <li>
        <a href="//www.twitter.com/nondescryptid"><span class="icon-twitter"></span></a>
      </li>
    
      <li>
        <a href="//github.com/nondescryptid"><span class="icon-github"></span></a>
      </li>
      
  </ul>
<div class="credits">
<span>&copy; 2023 &nbsp;&nbsp;TOMOE</span></br> <br>
<span>This site created with the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme for  </a> in <a href="//jekyllrb.com">Jekyll</a>.</span> 
</div>  
</footer>
  </body>
</html>
